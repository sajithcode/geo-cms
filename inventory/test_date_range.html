<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Date Range Test</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 20px;
      }
      .test-section {
        margin: 20px 0;
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 5px;
      }
      .test-section h3 {
        margin-top: 0;
        color: #333;
      }
      .form-group {
        margin: 10px 0;
      }
      label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
      }
      input[type="date"] {
        padding: 8px;
        border: 1px solid #ccc;
        border-radius: 4px;
        width: 200px;
      }
      .date-range {
        font-size: 0.9rem;
        line-height: 1.3;
        margin: 10px 0;
      }
      .date-range strong {
        color: #555;
        font-weight: 600;
      }
      .example {
        background: #f8f9fa;
        padding: 10px;
        border-radius: 4px;
        margin: 10px 0;
      }
    </style>
  </head>
  <body>
    <h1>ðŸ“… Date Range Selection Test</h1>

    <div class="test-section">
      <h3>1. Date Range Form Example</h3>
      <div class="form-group">
        <label for="start_date">Borrow Start Date:</label>
        <input
          type="date"
          id="start_date"
          name="start_date"
          min="<?php echo date('Y-m-d'); ?>"
        />
        <small>When you need to start using the equipment</small>
      </div>

      <div class="form-group">
        <label for="end_date">Borrow End Date:</label>
        <input
          type="date"
          id="end_date"
          name="end_date"
          min="<?php echo date('Y-m-d', strtotime('+1 day')); ?>"
        />
        <small>When you will return the equipment</small>
      </div>

      <div id="date-preview" class="date-range" style="display: none">
        <strong>Preview:</strong><br />
        <strong>From:</strong> <span id="preview-start"></span><br />
        <strong>To:</strong> <span id="preview-end"></span>
      </div>
    </div>

    <div class="test-section">
      <h3>2. Example Date Range Display (as it would appear in table)</h3>
      <div class="example">
        <div class="date-range">
          <strong>From:</strong> 11/10/2025<br />
          <strong>To:</strong> 15/10/2025
        </div>
      </div>

      <div class="example">
        <div class="date-range">
          <strong>From:</strong> 20/11/2025<br />
          <strong>To:</strong> 25/11/2025
        </div>
      </div>
    </div>

    <div class="test-section">
      <h3>3. Validation Examples</h3>
      <ul>
        <li>âœ… Start date cannot be in the past</li>
        <li>âœ… End date must be after start date</li>
        <li>âœ… Maximum borrow period: 30 days</li>
        <li>âœ… Both dates are required</li>
      </ul>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const startInput = document.getElementById("start_date");
        const endInput = document.getElementById("end_date");
        const preview = document.getElementById("date-preview");
        const previewStart = document.getElementById("preview-start");
        const previewEnd = document.getElementById("preview-end");

        function formatDate(dateString) {
          const date = new Date(dateString);
          return date.toLocaleDateString("en-GB"); // DD/MM/YYYY format
        }

        function updatePreview() {
          if (startInput.value && endInput.value) {
            previewStart.textContent = formatDate(startInput.value);
            previewEnd.textContent = formatDate(endInput.value);
            preview.style.display = "block";
          } else {
            preview.style.display = "none";
          }
        }

        function updateEndMinimum() {
          if (startInput.value) {
            const startDate = new Date(startInput.value);
            const nextDay = new Date(startDate);
            nextDay.setDate(startDate.getDate() + 1);

            const minEndDate = nextDay.toISOString().split("T")[0];
            endInput.min = minEndDate;

            if (endInput.value && endInput.value <= startInput.value) {
              endInput.value = "";
              updatePreview();
            }
          }
        }

        startInput.addEventListener("change", function () {
          updateEndMinimum();
          updatePreview();
        });

        endInput.addEventListener("change", updatePreview);
      });
    </script>
  </body>
</html>
